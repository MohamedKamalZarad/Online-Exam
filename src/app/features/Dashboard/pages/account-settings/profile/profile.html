<section class="p-5 sm:px-6 lg:px-0 bg-white">
  <form class="px-5 mx-auto" [formGroup]="registerForm" (ngSubmit)="editProfile()">

    @let firstName = registerForm.get("firstName");
    @let lastName = registerForm.get("lastName");
    @let username = registerForm.get("username");
    @let email = registerForm.get("email");
    @let phone = registerForm.get("phone");
    @let password = registerForm.get("password");
    @let rePassword = registerForm.get("rePassword");



    <div class="mb-5 flex flex-col sm:flex-row sm:space-x-4">

      <!-- First Name -->
      <div class="sm:w-1/2 w-full mb-4 sm:mb-0">
        <label class="block mb-2 text-sm font-semibold text-gray-900">First name</label>
        <input formControlName="firstName" type="text"
          [ngClass]="{'border-red-600': firstName?.invalid && firstName?.touched}"
          class="border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
         [placeholder]="userInfo.firstName" />
        <app-input-alert [control]="firstName" name="first name"></app-input-alert>
      </div>

      <!-- Last Name -->
      <div class="sm:w-1/2 w-full">
        <label class="block mb-2 text-sm font-semibold text-gray-900">Last name</label>
        <input formControlName="lastName" type="text"
          [ngClass]="{'border-red-600': lastName?.invalid && lastName?.touched}"
          class="border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
          [placeholder]="userInfo.lastName"  />
        <app-input-alert [control]="lastName" name="last name"></app-input-alert>
      </div>

    </div>


    <div class="mb-5">
      <label class="block mb-2 text-sm font-semibold text-gray-900">Username</label>
      <input formControlName="username" type="text"
        [ngClass]="{'border-red-600': username?.invalid && username?.touched}"
        class="border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
        [placeholder]="userInfo.username"  />
      <app-input-alert [control]="username" name="username"></app-input-alert>
    </div>


    <div class="mb-5">
      <label class="block mb-2 text-sm font-semibold text-gray-900">Email</label>
      <input formControlName="email" type="email" [ngClass]="{'border-red-600': email?.invalid && email?.touched}"
        class="border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
        [placeholder]="userInfo.email"  />
      <app-input-alert [control]="email" name="email"></app-input-alert>
    </div>



    <!-- Phone Number -->
    <label for="phone" class="block mb-2 text-sm font-semibold text-gray-900"> Phone number
    </label>
    <div class="mb-5">
      <div
        class="flex items-center border border-gray-300 focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500 rounded-sm">
        <button id="country-code" type="button" class="flex items-center gap-2 px-3 py-2 text-sm "> <img
            src="https://flagcdn.com/w20/eg.png" alt="Egypt flag" class="w-5 h-4 rounded-sm" /> <span
            class="text-gray-900 whitespace-nowrap">EG (+20)</span>
          <div class="relative w-3 h-4 flex flex-col justify-center"> <i
              class="fa-solid cursor-pointer fa-chevron-up text-[10px] text-black absolute top-0"></i> <i
              class="fa-solid cursor-pointer fa-chevron-down text-[10px] text-black absolute bottom-0"></i> </div>
        </button> <input [ngClass]="{'border-red-600': phone?.invalid && phone?.touched}" formControlName="phone"
          type="tel" id="phone" name="phone"  [placeholder]="userInfo.phone" 
          class="flex-1 w-full border-0 text-gray-900 text-sm p-2 focus:outline-none" required />
      </div>
      <app-input-alert [control]="phone" name="phone number"></app-input-alert>
    </div>



    @if (
    firstName?.invalid && firstName?.touched ||
    lastName?.invalid && lastName?.touched ||
    username?.invalid && username?.touched ||
    email?.invalid && email?.touched ||
    phone?.invalid && phone?.touched ||
    password?.invalid && password?.touched ||
    rePassword?.invalid && rePassword?.touched
    ) {
    <div class="mb-5">
      <somethingwrong></somethingwrong>
    </div>
    }
<div class="flex space-x-2 w-full justify-between">
<div class="w-1/2"> 

<button (click)="openModal($event)"

  class="w-full  justify-center relative bg-[#FEF2F2] text-[#DC2626] cursor-pointer  font-medium  text-sm px-5 py-2.5 text-center">

Delete My Account
</button></div>
<div class="w-1/2">

    <app-auth-button [isDisabled]="registerForm.invalid">Save Changes</app-auth-button>
</div>
</div>

  </form>
</section>
<div (click)="closeModal($event)" [class.hidden]="isClicked" class="fixed inset-0  backdrop-blur-[1px] flex justify-center items-center bg-[#00000080]">
  <div (click)="$event.stopPropagation()" class="modal relative bg-white col-span-4 ">
    <div (click)="closeModal($event)" class="relative text-sm  cursor-pointer">

      <i class="fa-solid fa-x top-0 px-3 py-1.5 right-0 absolute -translate-x-1/2 translate-y-1/2 text-[#6B7280]"></i>
    </div>
    <div class="p-10 flex flex-col justify-center border-b  border-b-gray-200 ">
<div class="flex justify-center mb-5">
  <div class="relative w-40 h-40 flex items-center justify-center">


  <div class="absolute inset-0 rounded-full bg-[#FEF2F2]"></div>


  <div class="absolute w-28 h-28 rounded-full bg-[#FEE2E2]"></div>

  <div class="relative z-10">
    <img src="/assets/Dashboard/Diplomas/triangle-alert.png" alt="" class="w-12 h-12" />
  </div>

</div>
</div>


  <p class="text-[#DC2626] text-center text-xl mb-5">
  Are you sure you want to delete your account?
</p>
<p class="text-center mb-7 text-[#6B7280]">
This action is permanent and cannot be undone.
</p>
</div>
<div class="flex justify-center space-x-2 p-8 bg-gray-50">
<button (click)="closeModal($event)" type="button" class="text-[#1F2937] cursor-pointer w-1/2 py-2 bg-gray-300 box-border border border-transparent   shadow-xs font-medium leading-5  text-sm px-4 focus:outline-none">Cancel</button>

 <button (click)="deleteAccount()" type="button" class="text-white cursor-pointer w-1/2 py-3 bg-[#DC2626]  box-border border border-transparent   shadow-xs font-medium leading-5  text-sm px-4 focus:outline-none">Yes, delete</button>

</div>
  </div>
</div>